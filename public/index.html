<!DOCTYPE html>
<html lang="en">
  <head>
      <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""></script>
<script>
  var OneSignal = window.OneSignal || [];
  OneSignal.push(function() {
    OneSignal.init({
      appId: "d7047234-bae6-4931-a057-99355f7a8200",
    });
  });
</script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="icon" href="<%= BASE_URL %>Logo_X.png">
    <title>APEX</title>

    
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <link href="{{asset('css/libs.css')}}" rel="stylesheet">
   
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
   
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    
    

   <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  </head>
  <body>
    
<script>
    OneSignal.push(function() {
      /* These examples are all valid */
      var isPushSupported = OneSignal.isPushNotificationsSupported();
      if (isPushSupported) {
        console.log("sup");
        // if(isEnabled){
        // // Push notifications are supported
        // }
      } else {
        // Push notifications are not supported
      }
      
    });
    </script>


<script>
    if(localStorage.getItem('token')!=null)
    {
           axios.post('http://35.232.3.8/api/Me', {
             token:localStorage.getItem('token')
            })
            .then(response=> {
              var user;
              user = response.data.user.id;
              
    OneSignal.push(function () {
      /* These examples are all valid */
      var isPushSupported = OneSignal.isPushNotificationsSupported();
      if (isPushSupported) {
        // Push notifications are supported
        console.log(' Push notifications are supported');
        OneSignal.isPushNotificationsEnabled(function (isEnabled) {
          console.log(isEnabled);
          if (isEnabled) {
            console.log("Push notifications are enabled!");
            OneSignal.getUserId(function (userId) {
              console.log("OneSignal User ID:", userId);
              // (Output) OneSignal User ID: 270a35cd-4dda-4b3f-b04e-41d7463a2316    
            });
           
            console.log(user);
            OneSignal.sendTags({user_id: user});
            OneSignal.on('notificationDisplay', function (event) {
              console.warn('OneSignal notification displayed:', event);
          
            });
          }
          else {
            console.log("Push notifications are not enabled yet.");
            OneSignal.push(function () {
              OneSignal.showSlidedownPrompt();
            });
          }
        });
  
      } else {
        // Push notifications are not supported
        console.log(' Push notifications are not supported');
      }
    
    });
             })
            .catch(function (error) {
              // console.log(error);
            });

  }
  else
  {
    OneSignal.push(["setSubscription", false]);
  
  }
  </script>
    
    <noscript>
      <strong>We're sorry but test doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
    </noscript>
    <div id="app"></div>
    <!-- built files will be auto injected -->
  </body>
</html>
